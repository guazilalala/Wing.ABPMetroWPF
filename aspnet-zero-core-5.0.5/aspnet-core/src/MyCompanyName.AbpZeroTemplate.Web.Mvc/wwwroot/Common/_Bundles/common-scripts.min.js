var app=app||{};(function(){app.UserNotificationHelper=function(){return function(){function t(n){switch(n.notification.notificationName){case"App.NewUserRegistered":return"/AppAreaName/users?filterText="+n.notification.data.properties.emailAddress;case"App.NewTenantRegistered":return"/AppAreaName/tenants?filterText="+n.notification.data.properties.tenancyName}return"#"}var n=abp.services.app.notification,i=function(n,i){var r={userNotificationId:n.id,text:abp.notifications.getFormattedMessageFromUserNotification(n),time:moment(n.notification.creationTime).format("YYYY-MM-DD HH:mm:ss"),icon:app.notification.getUiIconBySeverity(n.notification.severity),state:abp.notifications.getUserNotificationStateAsString(n.state),data:n.notification.data,url:t(n),isUnread:n.state===abp.notifications.userNotificationState.UNREAD,timeAgo:moment(n.notification.creationTime).fromNow()};return(i||i===undefined)&&(r.text=abp.utils.truncateStringWithPostfix(r.text,100)),r},r=function(n){abp.notifications.showUiNotifyForUserNotification(n,{onclick:function(){var i=t(n);i&&(location.href=i)}});Push.create("AbpZeroTemplate",{body:i(n).text,icon:abp.appPath+"Common/Images/app-logo-small.png",timeout:6e3,onClick:function(){window.focus();this.close()}})},u=function(t){n.setAllNotificationsAsRead().done(function(){abp.event.trigger("app.notifications.refresh");t&&t()})},f=function(t,i){n.setNotificationAsRead({id:t}).done(function(){abp.event.trigger("app.notifications.read",t);i&&i(t)})},e=function(){new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Notifications/SettingsModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Notifications/_SettingsModal.js",modalClass:"NotificationSettingsModal"}).open()};return{format:i,show:r,setAllAsRead:u,setAsRead:f,openSettingsModal:e}}}()})(jQuery);app=app||{},function(){$.extend(app,{consts:{grid:{defaultPageSize:10,defaultPageSizes:[10,20,50,100]},userManagement:{defaultAdminUserName:"admin"},contentTypes:{formUrlencoded:"application/x-www-form-urlencoded; charset=UTF-8"},friendshipState:{accepted:1,blocked:2}}})}();app=app||{},function(){var n=abp.localization.getSource("AbpZeroTemplate");app.localize=function(){return n.apply(this,arguments)};app.downloadTempFile=function(n){location.href=abp.appPath+"File/DownloadTempFile?fileType="+n.fileType+"&fileToken="+n.fileToken+"&fileName="+n.fileName};app.createDateRangePickerOptions=function(n){n=n||{allowFutureDate:!1};var t={locale:{format:"L",applyLabel:app.localize("Apply"),cancelLabel:app.localize("Cancel"),customRangeLabel:app.localize("CustomRange")},min:moment("2015-05-01"),minDate:moment("2015-05-01"),ranges:{}};return n.allowFutureDate||(t.max=moment(),t.maxDate=moment()),t.ranges[app.localize("Today")]=[moment().startOf("day"),moment().endOf("day")],t.ranges[app.localize("Yesterday")]=[moment().subtract(1,"days").startOf("day"),moment().subtract(1,"days").endOf("day")],t.ranges[app.localize("Last7Days")]=[moment().subtract(6,"days").startOf("day"),moment().endOf("day")],t.ranges[app.localize("Last30Days")]=[moment().subtract(29,"days").startOf("day"),moment().endOf("day")],t.ranges[app.localize("ThisMonth")]=[moment().startOf("month"),moment().endOf("month")],t.ranges[app.localize("LastMonth")]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],t};app.getUserProfilePicturePath=function(n){return n?abp.appPath+"Profile/GetProfilePictureById?id="+n:abp.appPath+"Common/Images/default-profile-picture.png"};app.getUserProfilePicturePath=function(){return abp.appPath+"Profile/GetProfilePicture?v="+(new Date).valueOf()};app.getShownLinkedUserName=function(n){return abp.multiTenancy.isEnabled?n.tenancyName?n.tenancyName+"\\"+n.username:".\\"+n.username:n.username};app.notification=app.notification||{};app.notification.getUiIconBySeverity=function(n){switch(n){case abp.notifications.severity.SUCCESS:return"fa fa-check";case abp.notifications.severity.WARN:return"fa fa-warning";case abp.notifications.severity.ERROR:return"fa fa-bolt";case abp.notifications.severity.FATAL:return"fa fa-bomb";case abp.notifications.severity.INFO:default:return"fa fa-info"}};app.changeNotifyPosition=function(n){toastr&&(toastr.clear(),toastr.options.positionClass=n)};app.waitUntilElementIsReady=function(n,t,i){var r,u;$&&(r=n.split(",").length,i||(i=100),u=setInterval(function(){$(n).length>=r&&(clearInterval(u),t())},i))};app.calculateTimeDifference=function(n,t,i){if(!moment)return null;var r=moment(n),u=moment(t);return u.diff(r,i)}}(),function(n){n&&(n.fn.buttonBusy=function(t){return n(this).each(function(){var i=n(this),r=i.find("i"),u=i.find("span");if(t){if(i.hasClass("button-busy"))return;i.attr("disabled","disabled");r.length&&(i.data("iconOriginalClasses",r.attr("class")),r.removeClass(),r.addClass("fa fa-spin fa-spinner"));u.length&&i.attr("busy-text")&&(i.data("buttonOriginalText",u.html()),u.html(i.attr("busy-text")));i.addClass("button-busy")}else{if(!i.hasClass("button-busy"))return;i.removeAttr("disabled");r.length&&i.data("iconOriginalClasses")&&(r.removeClass(),r.addClass(i.data("iconOriginalClasses")));u.length&&i.data("buttonOriginalText")&&u.html(i.data("buttonOriginalText"));i.removeClass("button-busy")}})},n.fn.serializeFormToObject=function(){var i=n(this).serializeArray(),t;return n(":disabled[name]",this).each(function(){i.push({name:this.name,value:n(this).val()})}),t={},i.map(function(n){t[n.name]=n.value}),t})}(jQuery),function(){abp.clock.provider.supportsMultipleTimezone&&window.moment&&moment.tz.setDefault(abp.timing.timeZoneInfo.iana.timeZoneId);abp.libs.sweetAlert&&(abp.libs.sweetAlert.config.info.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.success.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.warn.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.error.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.confirm.confirmButtonText=app.localize("Yes"),abp.libs.sweetAlert.config.confirm.cancelButtonText=app.localize("Cancel"))}();app=app||{},function(n){app.modals=app.modals||{};app.ModalManager=function(){function t(t){var r=t+"Container",u="#"+r,i=n(u);i.length&&i.remove()}function r(i){t(i);var r=i+"Container";return n('<div id="'+r+'"><\/div>').append('<div id="'+i+'" class="modal fade" tabindex="-1" role="modal" aria-hidden="true">  <div class="modal-dialog modal-lg">    <div class="modal-content"><\/div>  <\/div><\/div>').appendTo("body")}var i=function(n){n.modalId||(n.modalId="Modal_"+Math.floor(Math.random()*1e6)+(new Date).getTime())};return function(u){function a(){e&&e.save&&e.save()}function v(){f=n(w);f.modal({backdrop:"static"});f.on("hidden.bs.modal",function(){t(s);for(var n=0;n<l.length;n++)l[n]()});f.on("shown.bs.modal",function(){f.find("input:not([type=hidden]):first").focus()});var i=app.modals[u.modalClass];i&&(e=new i,e.init&&e.init(h,o));f.find(".save-button").click(function(){a()});f.find(".modal-body").keydown(function(n){n.which===13&&(n.target.tagName.toLocaleLowerCase()==="textarea"?n.stopPropagation():(n.preventDefault(),a()))});f.modal("show")}function d(n){f&&f.find(".modal-footer button").buttonBusy(n)}i(u);var p=u,f=null,s=u.modalId,w="#"+s,e=null,h=null,o=null,c=null,l=[];var y=function(n,t){o=n||{};c=t;r(s).find(".modal-content").load(u.viewUrl,o,function(n,t){if(t=="error"){abp.message.warn(abp.localization.abpWeb("InternalServerError"));return}u.scriptUrl?app.ResourceLoader.loadScript(u.scriptUrl,function(){v()}):v()})},b=function(){f&&f.modal("hide")},k=function(n){l.push(n)};return h={open:y,reopen:function(){y(o)},close:b,getModalId:function(){return s},getModal:function(){return f},getArgs:function(){return o},getOptions:function(){return p},setBusy:d,setResult:function(){c&&c.apply(h,arguments)},onClose:k}}}()}(jQuery),function(){app.PasswordComplexityHelper=function(){function n(n,t){if(n&&n.charAt(0)!==n.charAt(0).toLowerCase())this[n.charAt(0).toLowerCase()+n.slice(1)]=t;else return t}var t=function(n){var t="<ul style='display: inline-block;'>";return n.requireDigit&&(t+="<li>"+app.localize("PasswordComplexity_RequireDigit_Hint")+"<\/li>"),n.requireLowercase&&(t+="<li>"+app.localize("PasswordComplexity_RequireLowercase_Hint")+"<\/li>"),n.requireNonAlphanumeric&&(t+="<li>"+app.localize("PasswordComplexity_RequireNonAlphanumeric_Hint")+"<\/li>"),n.useLowerCaseLetters&&(t+="<li>"+app.localize("PasswordComplexity_UseLowerCaseLetters_Hint")+"<\/li>"),n.requireUppercase&&(t+="<li>"+app.localize("PasswordComplexity_RequireUppercase_Hint")+"<\/li>"),n.requiredLength>0&&(t+="<li>"+abp.utils.formatString(app.localize("PasswordComplexity_RequiredLength_Hint"),n.requiredLength)+"<\/li>"),t+"<\/ul>"},i=function(i,r){var f,u,e;if(i&&(r=JSON.parse(JSON.stringify(r),n),r))for(f=t(r),jQuery.validator.addMethod("passwordComplexity",function(n,t){return!t.hasAttribute("required")&&n===""?!0:r.requireDigit&&!/[0-9]/.test(n)?!1:r.requireLowercase&&!/[a-z]/.test(n)?!1:r.requireUppercase&&!/[A-Z]/.test(n)?!1:r.requiredLength&&n.length<r.requiredLength?!1:r.requireNonAlphanumeric&&/[0-9a-zA-Z]+$/.test(n)?!1:!0},f),u=0;u<i.length;u++)e=$(i[u]),e.rules("add","passwordComplexity")};return{setPasswordComplexityRules:i}}}();app=app||{},function(n){function i(){this.state=t.LOADING;this.loadCallbacks=[];this.failCallbacks=[]}var t={LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"};i.prototype.succeed=function(){this.state=t.LOADED;for(var n=0;n<this.loadCallbacks.length;n++)this.loadCallbacks[n]()};i.prototype.failed=function(){this.state=t.FAILED;for(var n=0;n<this.failCallbacks.length;n++)this.failCallbacks[n]()};i.prototype.handleCallbacks=function(n,i){switch(this.state){case t.LOADED:n&&n();break;case t.FAILED:i&&i();break;case t.LOADING:this.addCallbacks(n,i)}};i.prototype.addCallbacks=function(n,t){n&&this.loadCallbacks.push(n);t&&this.failCallbacks.push(t)};app.ResourceLoader=function(){var t={},r=function(r,u,f){var e=t[r];if(e){e.handleCallbacks(u,f);return}t[r]=e=new i;e.addCallbacks(u,f);n.getScript(r).done(function(){e.succeed()}).fail(function(){e.failed()})};return{loadScript:r}}()}(jQuery);app=app||{},function(){app.utils=app.utils||{};app.utils.string={truncate:function(n,t,i){return!n||!t||n.length<=t?n:i===!1?n.substr(0,t):n.substr(0,t-1)+"&#133;"}};app.utils.date={containsTime:function(n){return n?n.indexOf(":")!==-1:!1},getEndOfDay:function(n){return!n||!moment?null:moment(n).endOf("day")},getEndOfDayIfTimeNotExists:function(n){return this.containsTime(n)?n:this.getEndOfDay(n)},formatAsLongDateTime:function(n){return moment(n).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}}}();app=app||{},function(){app.chat=app.chat||{};app.chat.side={sender:1,receiver:2};app.chat.readState={unread:1,read:2};app.chat.sendMessage=function(){console.log(arguments)}}();app=app||{},function(n){if(n&&n.connection){app.signalr=app.signalr||{};app.signalr.hubs=app.signalr.hubs||{};app.signalr.hubs.chat=app.signalr.hubs.chat||n.connection.chatHub;var t=app.signalr.hubs.chat;t&&(n.connection.hub.stateChanged(function(t){t.newState===n.connection.connectionState.connected&&abp.event.trigger("app.chat.connected")}),t.client.getChatMessage=function(n){abp.event.trigger("app.chat.messageReceived",n)},t.client.getAllFriends=function(n){abp.event.trigger("abp.chat.friendListChanged",n)},t.client.getFriendshipRequest=function(n,t){abp.event.trigger("app.chat.friendshipRequestReceived",n,t)},t.client.getUserConnectNotification=function(n,t){abp.event.trigger("app.chat.userConnectionStateChanged",{friend:n,isConnected:t})},t.client.getUserStateChange=function(n,t){abp.event.trigger("app.chat.userStateChanged",{friend:n,state:t})},t.client.getallUnreadMessagesOfUserRead=function(n){abp.event.trigger("app.chat.allUnreadMessagesOfUserRead",{friend:n})},t.client.getReadStateChange=function(n){abp.event.trigger("app.chat.readStateChange",{friend:n})},app.chat.sendMessage=function(i,r){if(n.connection.hub.state!==n.signalR.connectionState.connected){r&&r();abp.notify.warn(app.localize("ChatIsNotConnectedWarning"));return}t.server.sendMessage(i).done(function(n){n&&abp.notify.warn(n)}).always(function(){r&&r()})})}}(jQuery),function(n){if(n.fn.dataTableExt){var t=function(t,i,r,u){var f={},e;t.inputFilter&&(f=n.extend(f,t.inputFilter()));u.oInit.paging&&(f=n.extend(f,{maxResultCount:i.length,skipCount:i.start}));i.order&&i.order.length>0&&(e=i.order[0],i.columns[e.column].data&&(f.sorting=i.columns[e.column].data+" "+e.dir));t.ajaxFunction&&t.ajaxFunction(f).done(function(n){u.rawServerResponse=n;r({recordsTotal:n.totalCount,recordsFiltered:n.totalCount,data:n.items})})};n.fn.dataTable&&(n.extend(!0,n.fn.dataTable.defaults,{ajax:function(n,i,r){r&&r.oInit&&r.oInit.listAction&&t(r.oInit.listAction,n,i,r)}}),n.fn.dataTable.Api.register("ajax.reloadPage()",function(){this.ajax.reload(null,!1)}))}}(jQuery),function(n){n.fn.dataTable&&n.extend(!0,n.fn.dataTable.defaults,{language:{url:"/Common/Scripts/Datatables/Translations/"+abp.localization.currentCulture.displayNameEnglish+".json"},lengthMenu:[5,10,25,50,100,250,500],pageLength:10,responsive:!0,searching:!1,pagingType:"bootstrap_full_number",dom:'rt<"bottom"ilp><"clear">',order:[]})}(jQuery),function(n){var t;if(n.fn.dataTableExt){var u=function(t,i){var u=n("<li/>"),r=n("<a/>");return i.text&&r.html(i.text),i.action&&r.click(function(r){r.preventDefault();n(this).closest("li").hasClass("disabled")||i.action({record:t})}),r.appendTo(u),u},f=function(t,i){var o=n("<div/>").addClass("dropdown").addClass("action-button"),h=n("<button/>").html(i.text).addClass("btn btn-brand btn-sm dropdown-toggle").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false"),f,e,r,s;for(i.cssClass&&h.addClass(i.cssClass),f=n("<ul/>").addClass("dropdown-menu"),e=0;e<i.items.length;e++)(r=i.items[e],!r.visible||r.visible({record:t}))&&(s=u(t,r),r.enabled&&!r.enabled({record:t})&&s.addClass("disabled"),s.appendTo(f));return(f.find("li").length>0&&(f.appendTo(o),h.appendTo(o)),f.children().length===0)?"":o},e=function(t,i){if(n(i.element).data(t),i.visible===undefined)return i.element;var r=typeof i.visible=="function";if(r){if(i.visible())return i.element}else if(i.visible)return i.element;return""},o=function(n,t,i){if(t.items&&t.items.length>1)return f(n,t,i);if(t.element){var r=e(n,t);if(r!="")return r.clone(!0)}return""},s=function(n,t){n.fnSetColumnVis(t,!1,!1)},h=function(n,t,i){n==""&&s(t,i)},i=function(t,i,r){var f,e,u,s,c,l;if(f=t.aoColumns?t.aoColumns:t.fnSettings().aoColumns,f)for(e=n(i).children("td"),u=0;u<f.length;u++)s=f[u],s.rowAction&&(c=o(r,s.rowAction,t),h(c,t,u),l=n(e[u]).find(".action-button"),l.length===0&&n(e[u]).append(c))},r=n.fn.dataTableExt.oApi.renderRowActions;(n.fn.dataTableExt.oApi.renderRowActions=function(n,t,u,f,e){r&&r(n,t,u,f,e);i(n,t,u,f,e)},n.fn.dataTable)&&(t=n.fn.dataTable.defaults.fnRowCallback,n.extend(!0,n.fn.dataTable.defaults,{fnRowCallback:function(n,r,u,f){t&&t(this,n,r,u,f);i(this,n,r,u,f)}}))}}(jQuery);app=app||{},function(){app.localStorage=app.localStorage||{};app.localStorage.setItem=function(n,t){localStorage&&localStorage.setItem(n,JSON.stringify(t))};app.localStorage.getItem=function(n,t){if(!localStorage)return null;var i=localStorage.getItem(n);if(t)t(i);else return i}}();app=app||{},function(){app.localStorage=app.localStorage||{};app.localStorage.setItem=function(n,t){localforage&&localforage.setItem(n,t)};app.localStorage.getItem=function(n,t){localforage&&t&&localforage.getItem(n).then(function(n){t(n)})}}();