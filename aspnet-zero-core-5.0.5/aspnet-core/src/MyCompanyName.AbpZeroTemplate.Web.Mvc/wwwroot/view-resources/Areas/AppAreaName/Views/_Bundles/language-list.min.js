jQuery,app.modals.CreateOrEditLanguageModal=function(){var a,e=abp.services.app.language,t=null;this.init=function(e){(a=e).getModal().find("#LanguageNameEdit").selectpicker({iconBase:"fa",tickIcon:"fa fa-check"}),a.getModal().find("#LanguageIconEdit").selectpicker({iconBase:"famfamfam-flag",tickIcon:"fa fa-check"}),t=a.getModal().find("form[name=LanguageInformationsForm]")},this.save=function(){var n=t.serializeFormToObject();a.setBusy(!0),e.createOrUpdateLanguage({language:n}).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),a.close(),abp.event.trigger("app.createOrEditLanguageModalSaved")}).always(function(){a.setBusy(!1)})}},$(function(){function a(a){s.setDefaultLanguage({name:a.name}).done(function(){t(),abp.notify.success(app.localize("SuccessfullySaved"))})}function e(a){abp.message.confirm(app.localize("LanguageDeleteWarningMessage",a.displayName),function(e){e&&s.deleteLanguage({id:a.id}).done(function(){t(),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function t(){d.ajax.reload()}var n=$("#LanguagesTable"),s=abp.services.app.language,i={create:abp.auth.hasPermission("Pages.Administration.Languages.Create"),edit:abp.auth.hasPermission("Pages.Administration.Languages.Edit"),changeTexts:abp.auth.hasPermission("Pages.Administration.Languages.ChangeTexts"),delete:abp.auth.hasPermission("Pages.Administration.Languages.Delete")},o=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Languages/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Languages/_CreateOrEditModal.js",modalClass:"CreateOrEditLanguageModal"}),d=n.DataTable({paging:!1,serverSide:!1,processing:!1,listAction:{ajaxFunction:s.getLanguages},columnDefs:[{targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("Edit"),visible:function(a){return i.edit&&a.record.tenantId===abp.session.tenantId},action:function(a){o.open({id:a.record.id})}},{text:app.localize("ChangeTexts"),visible:function(){return i.changeTexts},action:function(a){document.location.href=abp.appPath+"AppAreaName/Languages/Texts?languageName="+a.record.name}},{text:app.localize("SetAsDefaultLanguage"),visible:function(){return i.edit},action:function(e){a(e.record)}},{text:app.localize("Delete"),visible:function(a){return i.delete&&a.record.tenantId===abp.session.tenantId},action:function(a){e(a.record)}}]}},{targets:1,data:"displayName",render:function(a,e,t,n){var s=$("<span/>").append($("<i/>").addClass(t.icon).css("margin-right","5px")).append($("<span/>").attr("data-language-name",t.name).text(t.displayName));return n.settings.rawServerResponse.defaultLanguageName===t.name&&s.addClass("text-bold").append(" ("+app.localize("Default")+")"),s[0].outerHTML}},{targets:2,data:"name"},{targets:3,data:"tenantId",visible:!!abp.session.tenantId,render:function(a,e,t,n){var s=$("<span/>").addClass("label");return a!==abp.session.tenantId?s.addClass("m-badge m-badge--success m-badge--wide").text(app.localize("Yes")):s.addClass("m-badge m-badge--metal m-badge--wide").text(app.localize("No")),s[0].outerHTML}},{targets:4,data:"creationTime",render:function(a){return moment(a).format("L")}},{targets:5,data:"isDisabled",render:function(a){var e=!a,t=$("<span/>").addClass("label");return e?t.addClass("m-badge m-badge--success m-badge--wide").text(app.localize("Yes")):t.addClass("m-badge m-badge--metal m-badge--wide").text(app.localize("No")),t[0].outerHTML}}]});$("#CreateNewLanguageButton").click(function(){o.open()}),abp.event.on("app.createOrEditLanguageModalSaved",function(){t()})});