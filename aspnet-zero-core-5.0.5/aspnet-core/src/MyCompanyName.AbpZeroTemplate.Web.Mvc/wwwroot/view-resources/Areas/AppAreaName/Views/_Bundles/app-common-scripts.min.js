app.modals.LookupModal=function(){function e(){o.ajax.reload()}function t(e){var t=i.canSelect(e);if(t)return!0===t?(a.setResult(e),void a.close()):void t.then(function(t){t&&(a.setResult(e),a.close())})}var a,o,n,l,i={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(e){return!0}};this.init=function(r){a=r,i=$.extend(i,a.getOptions().lookupOptions),n=a.getModal().find(".lookup-modal-table"),o=n.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:i.pageSize,deferLoading:i.loadOnStartup?null:0,listAction:{ajaxFunction:i.serviceMethod,inputFilter:function(){return $.extend({filter:l.val()},a.getArgs().extraFilters)}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",rowAction:{element:$("<button/>").addClass("btn btn-default btn-xs").attr("title",app.localize("Select")).append($("<i/>").addClass("fa fa-chevron-circle-right")).click(function(){t($(this).data())})}},{targets:1,data:"name"}]}),a.getModal().find(".lookup-filter-button").click(function(t){t.preventDefault(),e()}),a.getModal().find(".modal-body").keydown(function(t){13===t.which&&(t.preventDefault(),e())}),(l=a.getModal().find(".lookup-filter-text")).val(i.filterText)}},app.modals.LookupModal.create=function(e){return new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Common/LookupModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Common/Modals/_LookupModal.js",modalClass:"LookupModal",lookupOptions:e})};