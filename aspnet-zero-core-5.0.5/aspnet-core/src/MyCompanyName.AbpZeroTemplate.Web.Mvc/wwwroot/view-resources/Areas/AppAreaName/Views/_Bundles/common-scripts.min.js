var app=app||{};!function(e){app.modals=app.modals||{},app.ModalManager=function(){function t(t){var a=e("#"+(t+"Container"));a.length&&a.remove()}function a(a){return t(a),e('<div id="'+(a+"Container")+'"></div>').append('<div id="'+a+'" class="modal fade" tabindex="-1" role="modal" aria-hidden="true">  <div class="modal-dialog modal-lg">    <div class="modal-content"></div>  </div></div>').appendTo("body")}var n=function(e){e.modalId||(e.modalId="Modal_"+Math.floor(1e6*Math.random())+(new Date).getTime())};return function(i){function o(){u&&u.save&&u.save()}function r(){(l=e(p)).modal({backdrop:"static"}),l.on("hidden.bs.modal",function(){t(c);for(var e=0;e<g.length;e++)g[e]()}),l.on("shown.bs.modal",function(){l.find("input:not([type=hidden]):first").focus()});var a=app.modals[i.modalClass];a&&(u=new a).init&&u.init(f,d),l.find(".save-button").click(function(){o()}),l.find(".modal-body").keydown(function(e){13===e.which&&("textarea"===e.target.tagName.toLocaleLowerCase()?e.stopPropagation():(e.preventDefault(),o()))}),l.modal("show")}n(i);var s=i,l=null,c=i.modalId,p="#"+c,u=null,f=null,d=null,m=null,g=[],h=function(e,t){d=e||{},m=t,a(c).find(".modal-content").load(i.viewUrl,d,function(e,t,a){"error"!=t?i.scriptUrl?app.ResourceLoader.loadScript(i.scriptUrl,function(){r()}):r():abp.message.warn(abp.localization.abpWeb("InternalServerError"))})};return f={open:h,reopen:function(){h(d)},close:function(){l&&l.modal("hide")},getModalId:function(){return c},getModal:function(){return l},getArgs:function(){return d},getOptions:function(){return s},setBusy:function(e){l&&l.find(".modal-footer button").buttonBusy(e)},setResult:function(){m&&m.apply(f,arguments)},onClose:function(e){g.push(e)}}}}()}(jQuery);var app=app||{};!function(e){function t(){this.state=a.LOADING,this.loadCallbacks=[],this.failCallbacks=[]}var a={LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"};t.prototype.succeed=function(){this.state=a.LOADED;for(var e=0;e<this.loadCallbacks.length;e++)this.loadCallbacks[e]()},t.prototype.failed=function(){this.state=a.FAILED;for(var e=0;e<this.failCallbacks.length;e++)this.failCallbacks[e]()},t.prototype.handleCallbacks=function(e,t){switch(this.state){case a.LOADED:e&&e();break;case a.FAILED:t&&t();break;case a.LOADING:this.addCallbacks(e,t)}},t.prototype.addCallbacks=function(e,t){e&&this.loadCallbacks.push(e),t&&this.failCallbacks.push(t)},app.ResourceLoader=function(){var a={};return{loadScript:function(n,i,o){var r=a[n];r?r.handleCallbacks(i,o):(a[n]=r=new t,r.addCallbacks(i,o),e.getScript(n).done(function(e,t){r.succeed()}).fail(function(e,t,a){r.failed()}))}}}()}(jQuery);var app=app||{};jQuery,app.UserNotificationHelper=function(){function e(e){switch(e.notification.notificationName){case"App.NewUserRegistered":return"/AppAreaName/users?filterText="+e.notification.data.properties.emailAddress;case"App.NewTenantRegistered":return"/AppAreaName/tenants?filterText="+e.notification.data.properties.tenancyName}return"#"}var t=abp.services.app.notification,a=function(t,a){var n={userNotificationId:t.id,text:abp.notifications.getFormattedMessageFromUserNotification(t),time:moment(t.notification.creationTime).format("YYYY-MM-DD HH:mm:ss"),icon:app.notification.getUiIconBySeverity(t.notification.severity),state:abp.notifications.getUserNotificationStateAsString(t.state),data:t.notification.data,url:e(t),isUnread:t.state===abp.notifications.userNotificationState.UNREAD,timeAgo:moment(t.notification.creationTime).fromNow()};return(a||void 0===a)&&(n.text=abp.utils.truncateStringWithPostfix(n.text,100)),n};return{format:a,show:function(t){abp.notifications.showUiNotifyForUserNotification(t,{onclick:function(){var a=e(t);a&&(location.href=a)}}),Push.create("AbpZeroTemplate",{body:a(t).text,icon:abp.appPath+"Common/Images/app-logo-small.png",timeout:6e3,onClick:function(){window.focus(),this.close()}})},setAllAsRead:function(e){t.setAllNotificationsAsRead().done(function(){abp.event.trigger("app.notifications.refresh"),e&&e()})},setAsRead:function(e,a){t.setNotificationAsRead({id:e}).done(function(){abp.event.trigger("app.notifications.read",e),a&&a(e)})},openSettingsModal:function(){new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Notifications/SettingsModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Notifications/_SettingsModal.js",modalClass:"NotificationSettingsModal"}).open()}}};var app=app||{};$.extend(app,{consts:{grid:{defaultPageSize:10,defaultPageSizes:[10,20,50,100]},userManagement:{defaultAdminUserName:"admin"},contentTypes:{formUrlencoded:"application/x-www-form-urlencoded; charset=UTF-8"},friendshipState:{accepted:1,blocked:2}}});var app=app||{};!function(){var e=abp.localization.getSource("AbpZeroTemplate");app.localize=function(){return e.apply(this,arguments)},app.downloadTempFile=function(e){location.href=abp.appPath+"File/DownloadTempFile?fileType="+e.fileType+"&fileToken="+e.fileToken+"&fileName="+e.fileName},app.createDateRangePickerOptions=function(e){e=e||{allowFutureDate:!1};var t={locale:{format:"L",applyLabel:app.localize("Apply"),cancelLabel:app.localize("Cancel"),customRangeLabel:app.localize("CustomRange")},min:moment("2015-05-01"),minDate:moment("2015-05-01"),ranges:{}};return e.allowFutureDate||(t.max=moment(),t.maxDate=moment()),t.ranges[app.localize("Today")]=[moment().startOf("day"),moment().endOf("day")],t.ranges[app.localize("Yesterday")]=[moment().subtract(1,"days").startOf("day"),moment().subtract(1,"days").endOf("day")],t.ranges[app.localize("Last7Days")]=[moment().subtract(6,"days").startOf("day"),moment().endOf("day")],t.ranges[app.localize("Last30Days")]=[moment().subtract(29,"days").startOf("day"),moment().endOf("day")],t.ranges[app.localize("ThisMonth")]=[moment().startOf("month"),moment().endOf("month")],t.ranges[app.localize("LastMonth")]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],t},app.getUserProfilePicturePath=function(e){return e?abp.appPath+"Profile/GetProfilePictureById?id="+e:abp.appPath+"Common/Images/default-profile-picture.png"},app.getUserProfilePicturePath=function(){return abp.appPath+"Profile/GetProfilePicture?v="+(new Date).valueOf()},app.getShownLinkedUserName=function(e){return abp.multiTenancy.isEnabled?e.tenancyName?e.tenancyName+"\\"+e.username:".\\"+e.username:e.username},app.notification=app.notification||{},app.notification.getUiIconBySeverity=function(e){switch(e){case abp.notifications.severity.SUCCESS:return"fa fa-check";case abp.notifications.severity.WARN:return"fa fa-warning";case abp.notifications.severity.ERROR:return"fa fa-bolt";case abp.notifications.severity.FATAL:return"fa fa-bomb";case abp.notifications.severity.INFO:default:return"fa fa-info"}},app.changeNotifyPosition=function(e){toastr&&(toastr.clear(),toastr.options.positionClass=e)},app.waitUntilElementIsReady=function(e,t,a){if($){var n=e.split(",").length;a||(a=100);var i=setInterval(function(){$(e).length>=n&&(clearInterval(i),t())},a)}},app.calculateTimeDifference=function(e,t,a){if(!moment)return null;var n=moment(e);return moment(t).diff(n,a)}}(),function(e){e&&(e.fn.buttonBusy=function(t){return e(this).each(function(){var a=e(this),n=a.find("i"),i=a.find("span");if(t){if(a.hasClass("button-busy"))return;a.attr("disabled","disabled"),n.length&&(a.data("iconOriginalClasses",n.attr("class")),n.removeClass(),n.addClass("fa fa-spin fa-spinner")),i.length&&a.attr("busy-text")&&(a.data("buttonOriginalText",i.html()),i.html(a.attr("busy-text"))),a.addClass("button-busy")}else{if(!a.hasClass("button-busy"))return;a.removeAttr("disabled"),n.length&&a.data("iconOriginalClasses")&&(n.removeClass(),n.addClass(a.data("iconOriginalClasses"))),i.length&&a.data("buttonOriginalText")&&i.html(a.data("buttonOriginalText")),a.removeClass("button-busy")}})},e.fn.serializeFormToObject=function(){var t=e(this).serializeArray();e(":disabled[name]",this).each(function(){t.push({name:this.name,value:e(this).val()})});var a={};return t.map(function(e){a[e.name]=e.value}),a})}(jQuery),function(e){e.validator.setDefaults({errorElement:"div",errorClass:"form-control-feedback",focusInvalid:!1,submitOnKeyPress:!0,ignore:":hidden",highlight:function(t){e(t).closest(".form-group").addClass("has-danger")},unhighlight:function(t){e(t).closest(".form-group").removeClass("has-danger")},errorPlacement:function(e,t){1===t.closest(".input-icon").length?e.insertAfter(t.closest(".input-icon")):e.insertAfter(t)},success:function(e){e.closest(".form-group").removeClass("has-danger"),e.remove()},submitHandler:function(t){e(t).find(".alert-danger").hide()}})}(jQuery),abp.clock.provider.supportsMultipleTimezone&&window.moment&&moment.tz.setDefault(abp.timing.timeZoneInfo.iana.timeZoneId),abp.libs.sweetAlert&&(abp.libs.sweetAlert.config.info.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.success.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.warn.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.error.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.confirm.confirmButtonText=app.localize("Yes"),abp.libs.sweetAlert.config.confirm.cancelButtonText=app.localize("Cancel")),app.PasswordComplexityHelper=function(){function e(e,t){if(!e||e.charAt(0)===e.charAt(0).toLowerCase())return t;this[e.charAt(0).toLowerCase()+e.slice(1)]=t}var t=function(e){var t="<ul style='display: inline-block;'>";return e.requireDigit&&(t+="<li>"+app.localize("PasswordComplexity_RequireDigit_Hint")+"</li>"),e.requireLowercase&&(t+="<li>"+app.localize("PasswordComplexity_RequireLowercase_Hint")+"</li>"),e.requireNonAlphanumeric&&(t+="<li>"+app.localize("PasswordComplexity_RequireNonAlphanumeric_Hint")+"</li>"),e.useLowerCaseLetters&&(t+="<li>"+app.localize("PasswordComplexity_UseLowerCaseLetters_Hint")+"</li>"),e.requireUppercase&&(t+="<li>"+app.localize("PasswordComplexity_RequireUppercase_Hint")+"</li>"),e.requiredLength>0&&(t+="<li>"+abp.utils.formatString(app.localize("PasswordComplexity_RequiredLength_Hint"),e.requiredLength)+"</li>"),t+"</ul>"};return{setPasswordComplexityRules:function(a,n){if(a&&(n=JSON.parse(JSON.stringify(n),e))){var i=t(n);jQuery.validator.addMethod("passwordComplexity",function(e,t){return!((t.hasAttribute("required")||""!==e)&&(n.requireDigit&&!/[0-9]/.test(e)||n.requireLowercase&&!/[a-z]/.test(e)||n.requireUppercase&&!/[A-Z]/.test(e)||n.requiredLength&&e.length<n.requiredLength||n.requireNonAlphanumeric&&/[0-9a-zA-Z]+$/.test(e)))},i);for(var o=0;o<a.length;o++)$(a[o]).rules("add","passwordComplexity")}}}},(app=app||{}).utils=app.utils||{},app.utils.string={truncate:function(e,t,a){return!e||!t||e.length<=t?e:!1===a?e.substr(0,t):e.substr(0,t-1)+"&#133;"}},app.utils.date={containsTime:function(e){return!!e&&-1!==e.indexOf(":")},getEndOfDay:function(e){return e&&moment?moment(e).endOf("day"):null},getEndOfDayIfTimeNotExists:function(e){return this.containsTime(e)?e:this.getEndOfDay(e)},formatAsLongDateTime:function(e){return moment(e).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}},function(e){if(e.fn.dataTableExt){var t=function(t,a,n,i){var o={};if(t.inputFilter&&(o=e.extend(o,t.inputFilter())),i.oInit.paging&&(o=e.extend(o,{maxResultCount:a.length,skipCount:a.start})),a.order&&a.order.length>0){var r=a.order[0];a.columns[r.column].data&&(o.sorting=a.columns[r.column].data+" "+r.dir)}t.ajaxFunction&&t.ajaxFunction(o).done(function(e){i.rawServerResponse=e,n({recordsTotal:e.totalCount,recordsFiltered:e.totalCount,data:e.items})})};e.fn.dataTable&&(e.extend(!0,e.fn.dataTable.defaults,{ajax:function(e,a,n){n&&n.oInit&&n.oInit.listAction&&t(n.oInit.listAction,e,a,n)}}),e.fn.dataTable.Api.register("ajax.reloadPage()",function(){this.ajax.reload(null,!1)}))}}(jQuery),function(e){if(e.fn.dataTable){var t="/Common/Scripts/Datatables/Translations/"+abp.localization.currentCulture.displayNameEnglish+".json";e.ajax(t).fail(function(){t="/Common/Scripts/Datatables/Translations/English.json",console.log("Language is set to English for datatables, because "+abp.localization.currentCulture.displayNameEnglish+" is not found!")}).always(function(){e.extend(!0,e.fn.dataTable.defaults,{language:{url:t},lengthMenu:[5,10,25,50,100,250,500],pageLength:10,responsive:!0,searching:!1,pagingType:"bootstrap_full_number",dom:'rt<"bottom"ilp><"clear">',order:[]})})}}(jQuery),function(e){if(e.fn.dataTableExt){var t=function(t,a){var n=e("<li/>"),i=e("<a/>");return a.text&&i.html(a.text),a.action&&i.click(function(n){n.preventDefault(),e(this).closest("li").hasClass("disabled")||a.action({record:t})}),i.appendTo(n),n},a=function(a,n){var i=e("<div/>").addClass("dropdown").addClass("action-button"),o=e("<button/>").html(n.text).addClass("btn btn-brand btn-sm dropdown-toggle").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false");n.cssClass&&o.addClass(n.cssClass);for(var r=e("<ul/>").addClass("dropdown-menu"),s=0;s<n.items.length;s++){var l=n.items[s];if(!l.visible||l.visible({record:a})){var c=t(a,l);l.enabled&&!l.enabled({record:a})&&c.addClass("disabled"),c.appendTo(r)}}return r.find("li").length>0&&(r.appendTo(i),o.appendTo(i)),0===r.children().length?"":i},n=function(t,a){if(e(a.element).data(t),void 0===a.visible)return a.element;if("function"==typeof a.visible){if(a.visible())return a.element}else if(a.visible)return a.element;return""},i=function(e,t,i){if(t.items&&t.items.length>1)return a(e,t);if(t.element){var o=n(e,t);if(""!=o)return o.clone(!0)}return""},o=function(e,t){e.fnSetColumnVis(t,!1,!1)},r=function(e,t,a){""==e&&o(t,a)},s=function(t,a,n,o,s){var l;if(l=t.aoColumns?t.aoColumns:t.fnSettings().aoColumns)for(var c=e(a).children("td"),p=0;p<l.length;p++){var u=l[p];if(u.rowAction){var f=i(n,u.rowAction);r(f,t,p),0===e(c[p]).find(".action-button").length&&e(c[p]).append(f)}}},l=e.fn.dataTableExt.oApi.renderRowActions;if(e.fn.dataTableExt.oApi.renderRowActions=function(e,t,a,n,i){l&&l(e,t,a,n,i),s(e,t,a)},e.fn.dataTable){var c=e.fn.dataTable.defaults.fnRowCallback;e.extend(!0,e.fn.dataTable.defaults,{fnRowCallback:function(e,t,a,n){c&&c(this,e,t,a,n),s(this,e,t)}})}}}(jQuery),(app=app||{}).localStorage=app.localStorage||{},app.localStorage.setItem=function(e,t){localStorage&&localStorage.setItem(e,JSON.stringify(t))},app.localStorage.getItem=function(e,t){if(!localStorage)return null;var a=localStorage.getItem(e);if(!t)return a;t(a)},(app=app||{}).localStorage=app.localStorage||{},app.localStorage.setItem=function(e,t){localforage&&localforage.setItem(e,t)},app.localStorage.getItem=function(e,t){localforage&&t&&localforage.getItem(e).then(function(e){t(e)})},(app=app||{}).chat=app.chat||{},app.chat.side={sender:1,receiver:2},app.chat.readState={unread:1,read:2},app.chat.sendMessage=function(){console.log(arguments)};var app=app||{};!function(e){if(e&&e.connection){app.signalr=app.signalr||{},app.signalr.hubs=app.signalr.hubs||{},app.signalr.hubs.chat=app.signalr.hubs.chat||e.connection.chatHub;var t=app.signalr.hubs.chat;t&&(e.connection.hub.stateChanged(function(t){t.newState===e.connection.connectionState.connected&&abp.event.trigger("app.chat.connected")}),t.client.getChatMessage=function(e){abp.event.trigger("app.chat.messageReceived",e)},t.client.getAllFriends=function(e){abp.event.trigger("abp.chat.friendListChanged",e)},t.client.getFriendshipRequest=function(e,t){abp.event.trigger("app.chat.friendshipRequestReceived",e,t)},t.client.getUserConnectNotification=function(e,t){abp.event.trigger("app.chat.userConnectionStateChanged",{friend:e,isConnected:t})},t.client.getUserStateChange=function(e,t){abp.event.trigger("app.chat.userStateChanged",{friend:e,state:t})},t.client.getallUnreadMessagesOfUserRead=function(e){abp.event.trigger("app.chat.allUnreadMessagesOfUserRead",{friend:e})},t.client.getReadStateChange=function(e){abp.event.trigger("app.chat.readStateChange",{friend:e})},app.chat.sendMessage=function(a,n){if(e.connection.hub.state!==e.signalR.connectionState.connected)return n&&n(),void abp.notify.warn(app.localize("ChatIsNotConnectedWarning"));t.server.sendMessage(a).done(function(e){e&&abp.notify.warn(e)}).always(function(){n&&n()})})}}(jQuery);